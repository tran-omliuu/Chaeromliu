/* ------------------------------
   CSS Há»“ sÆ¡ LiÃªu BÃ­ch TrÃ¢n (khÃ´i phá»¥c)
   Chá»§ Ä‘á»: Nghá»‡ thuáº­t + ToÃ¡n há»c + TÃ´ng há»“ng
--------------------------------*/
:root {
    --font-sans: 'Quicksand', system-ui, sans-serif;
    /* Font thân bài tròn, nhẹ, vui tươi */
    --font-heading: 'Pacifico', 'Quicksand', system-ui, cursive;
    /* Font tiêu đề viết tay mềm mại */
    --font-brand: var(--font-heading);
    /* Line-height riêng cho font script tránh bị crop */
    --heading-line-height: 1.85;
    /* Font chính */
    --font-mono: 'Fira Code', monospace;
    /* Font đậm nhấn */
    --radius-sm: 6px;
    /* NÃºt */
    --radius-md: 14px;
    /* Tháº» */
    --radius-lg: 28px;
    /* Bo lớn */
    --gradient: linear-gradient(135deg, #0e0088, #fe63c3, #6e54ff);
    /* Tím -> hồng */
    /*
    To customize the dark-mode gradients:
    - Edit --gradient-dark inside the [data-theme='dark'] block to change the Main site gradient in dark mode.
    - Edit --gradient-project inside the [data-theme='dark'] block to change the 'Xem dự án' button gradient specifically.
    You can also set --gradient-project: var(--gradient-dark) to use the same dark gradient for the button.
    */
    /* Gradient riêng cho nút 'Xem dự án' */
    --gradient-project: linear-gradient(120deg, #ffd4f4, #ffbade 20%, #fcdeed);
    --shadow-sm: 0 2px 4px -2px rgba(0, 0, 0, .12), 0 4px 10px -2px rgba(0, 0, 0, .06);
    --shadow-md: 0 4px 8px -2px rgba(0, 0, 0, .15), 0 8px 24px -6px rgba(0, 0, 0, .12);
    --shadow-glow: 0 0 0 1px rgba(255, 255, 255, .05), 0 4px 30px -6px rgba(99, 102, 241, .4);

    /* Dark base */
    --color-bg: #0f1115;
    --color-bg-alt: #181b22;
    --color-surface: #1f2430;
    --color-text: #eef2f7;
    --color-text-dim: #b2bccd;
    --color-border: #303845;
    --color-accent: #818cf8;
    --color-accent-rgb: 129, 140, 248;
    --color-error: #ef4444;
    --color-warn: #f59e0b;
    --focus-ring: 0 0 0 3px rgba(129, 140, 248, .5);

    /* áº¢nh ná»n + overlay (Ã¡p dá»¥ng cho theme sÃ¡ng hiá»‡n táº¡i) */
    --bg-image: url('Ảnh/image.png');
    --bg-overlay: rgba(255, 255, 255, 0.38);
}

/* Dark theme overrides (khi chuyển sang giao diện tối) */
[data-theme='dark'] {
    /* Giữ màu nền gốc tối để làm base dưới ảnh */
    --color-bg: #0f1115;
    --color-bg-alt: #181b22;
    --color-surface: #1f2430;
    --color-text: #eef2f7;
    --color-text-dim: #b2bccd;
    --color-border: #303845;
    --color-accent: #818cf8;
    --color-accent-rgb: 129, 140, 248;
    /* Ảnh nền riêng cho dark mode */
    --bg-image: url('Ảnh/image2.png');
    /* Tint tối phủ lên ảnh để chữ dễ đọc hơn */
    --bg-overlay: rgba(10, 12, 16, 0.62);
    /* tăng/giảm alpha (0.5 - 0.75) để điều chỉnh độ tối */
    /* Gradient riêng cho dark mode */
    --gradient-dark: linear-gradient(120deg, #ffdbfc, #ff87e3);
    /* Make the site gradient and project button use the dark gradient by default in dark mode */
    --gradient: var(--gradient-dark);
    --gradient-project: linear-gradient(120deg, #be008f, #0c0095);
    /* keep a soft project gradient by default */
}

[data-theme='light'] {
    --color-bg: #fff7fb;
    /* Nền pastel rất nhạt */
    --color-bg-alt: #ffeef7;
    /* Nền phụ dịu hơn */
    --color-surface: #ffffff;
    /* Card trắng giữ độ nổi */
    --color-text: #351a29;
    /* Chữ chính hơi dịu so với #2a1020 */
    --color-text-dim: #8d5e7d;
    /* Chữ phụ nhạt hơn */
    --color-border: #fad4e5;
    /* Viền hồng rất nhạt */
    --color-accent: #f478b9;
    /* Accent mềm hơn một chút */
    --color-accent-rgb: 244, 120, 185;
    /* Cập nhật RGB tương ứng */
    --shadow-glow: 0 0 0 1px rgba(0, 0, 0, 0.03), 0 4px 30px -6px rgba(244, 120, 185, 0.30);
    --bg-overlay: rgba(255, 250, 252, 0.70);
    /* Overlay sáng hơn để tổng thể nhẹ */
}

* {
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    margin: 0;
    font-family: var(--font-sans);
    /* Layer: overlay -> radial -> image -> base color */
    background:
        linear-gradient(var(--bg-overlay), var(--bg-overlay)),
        radial-gradient(circle at 22% 18%, rgba(var(--color-accent-rgb), .10), transparent 60%),
        var(--bg-image) center/cover no-repeat,
        var(--color-bg);
    background-attachment: fixed, fixed, fixed, scroll;
    background-repeat: no-repeat, no-repeat, no-repeat, repeat;
    background-position: center center, 20% 20%, center center, 0 0;
    color: var(--color-text);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    min-height: 100vh;
    transition: background-color .6s ease, color .4s ease;
    /* mượt khi đổi theme */
}

/* Tối ưu chuyển nền nhiều layer: chỉ animate opacity lớp phủ để tránh giật mạnh */
html[data-theme='dark'] body,
html[data-theme='light'] body {
    background-color: var(--color-bg);
}

#bg-canvas {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    display: block;
}

.surface {
    background: linear-gradient(145deg, rgba(255, 255, 255, .04), rgba(255, 255, 255, .02));
    backdrop-filter: blur(14px)saturate(140%);
    -webkit-backdrop-filter: blur(14px)saturate(140%);
    border: 1px solid rgba(255, 255, 255, .08);
}

.site-header {
    position: sticky;
    top: 0;
    backdrop-filter: blur(16px)saturate(180%);
    -webkit-backdrop-filter: blur(16px)saturate(180%);
    background: rgba(15, 17, 21, .72);
    border-bottom: 1px solid var(--color-border);
    z-index: 50;
}

[data-theme='light'] .site-header {
    background: rgba(255, 228, 244, .85);
}

.nav {
    max-width: 1180px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .6rem 1.2rem;
    gap: 1rem;
}

.brand {
    font-weight: 600;
    font-size: 1.15rem;
    letter-spacing: .5px;
    font-family: var(--font-brand);
    background: var(--gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}


.nav-links {
    list-style: none;
    display: flex;
    gap: 1.4rem;
    margin: 0;
    padding: 0;
}

.nav-links a {
    color: var(--color-text-dim);
    text-decoration: none;
    font-weight: 500;
    font-size: .95rem;
    position: relative;
    padding: .4rem .2rem;
    transition: color .25s;
}

.nav-links a::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    height: 2px;
    width: 0;
    background: var(--gradient);
    transition: width .35s cubic-bezier(.65, .05, .36, 1);
    border-radius: 2px;
}

.nav-links a:hover,
.nav-links a:focus {
    color: var(--color-text);
}

.nav-links a:hover::after,
.nav-links a:focus::after {
    width: 100%;
}

.nav-toggle {
    display: none;
}

.theme-toggle,
.nav-toggle {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text-dim);
    padding: .55rem .75rem;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: .9rem;
    display: flex;
    align-items: center;
    gap: .4rem;
    transition: background .3s, color .3s, border-color .3s;
}

.theme-toggle:hover,
.nav-toggle:hover {
    color: var(--color-text);
    background: var(--color-bg-alt);
}

.theme-toggle:focus-visible,
.nav-toggle:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.hero {
    max-width: 1180px;
    margin: 0 auto;
    padding: clamp(3rem, 9vh, 6rem) 1.4rem 2rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 3rem;
    align-items: center;
}

.hero-content h1 {
    font-size: clamp(2.1rem, 4.7vw, 2.9rem);
    /* giảm nhẹ để tránh chạm viền */
    line-height: var(--heading-line-height);
    margin: 0 0 1rem;
    font-weight: 600;
    font-family: var(--font-heading);
    letter-spacing: .5px;
    padding-top: .3rem;
    /* thêm khoảng trống phía trên */
}

.highlight {
    background: var(--gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.tagline {
    font-size: 1.05rem;
    max-width: 620px;
    color: var(--color-text-dim);
}

.quick-tags {
    display: flex;
    flex-wrap: wrap;
    gap: .5rem;
    margin: 1.4rem 0 1.2rem;
}

.quick-tags span {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    padding: .45rem .7rem;
    font-size: .7rem;
    letter-spacing: .5px;
    text-transform: uppercase;
    border-radius: 999px;
    color: var(--color-text-dim);
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: .4ch;
}

.quick-tags span:hover {
    color: var(--color-text);
}

.hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.btn {
    --btn-bg: var(--color-surface);
    --btn-border: var(--color-border);
    --btn-color: var(--color-text);
    font-weight: 500;
    text-decoration: none;
    padding: .85rem 1.25rem;
    border-radius: var(--radius-sm);
    background: var(--btn-bg);
    border: 1px solid var(--btn-border);
    color: var(--btn-color);
    font-size: .95rem;
    position: relative;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    transition: background .35s, transform .35s, border-color .35s;
}

.btn.primary {
    background: var(--gradient);
    border: none;
}

/* Nút Xem dự án riêng màu */
.btn-project {
    background: var(--gradient-project) !important;
    position: relative;
}

.btn-project::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(140deg, rgba(255, 255, 255, .25), transparent 60%);
    opacity: 0;
    transition: opacity .5s;
    border-radius: inherit;
}

.btn-project:hover::after {
    opacity: .9;
}

.btn-project:focus-visible {
    box-shadow: 0 0 0 3px rgba(255, 105, 150, .55);
}

.btn.outline {
    background: transparent;
}

.btn:hover {
    transform: translateY(-3px);
}

.btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.hero-visual {
    display: flex;
    justify-content: center;
}

.avatar-placeholder {
    width: 260px;
    height: 260px;
    background: linear-gradient(160deg, rgba(var(--color-accent-rgb), .35), rgba(var(--color-accent-rgb), .08));
    border: 1px solid var(--color-border);
    border-radius: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    font-size: .95rem;
    text-align: center;
    color: var(--color-text-dim);
    position: relative;
    box-shadow: var(--shadow-md);
}

.avatar-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    display: block;
}

.avatar-placeholder::before,
.avatar-placeholder::after {
    content: '';
    position: absolute;
    border-radius: inherit;
    inset: 0;
    background: linear-gradient(120deg, rgba(var(--color-accent-rgb), .6), transparent 60%);
    mix-blend-mode: overlay;
    opacity: .4;
    pointer-events: none;
}

.avatar-placeholder::after {
    inset: 6px;
    background: linear-gradient(140deg, transparent, rgba(var(--color-accent-rgb), .25));
    filter: blur(12px);
}

.section {
    max-width: 1180px;
    margin: 0 auto;
    padding: clamp(2.8rem, 8vh, 4.8rem) 1.4rem 1.6rem;
    position: relative;
}

.section>h2 {
    font-size: clamp(1.7rem, 2.9vw, 2.15rem);
    margin: 0 0 1.9rem;
    line-height: var(--heading-line-height);
    font-weight: 600;
    display: block;
    /* tránh baseline flex gây cắt */
    letter-spacing: .4px;
    font-family: var(--font-heading);
    background: linear-gradient(90deg, var(--color-text) 0%, var(--color-text-dim) 70%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    /* đảm bảo gradient trên Safari */
    color: transparent;
    padding-top: .25rem;
    overflow: visible;
}

.grid.cards {
    --min: 230px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--min), 1fr));
    gap: 1.5rem;
}

.card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 1.2rem 1.25rem 1.35rem;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: .6rem;
    box-shadow: var(--shadow-sm);
    transition: transform .5s cubic-bezier(.22, 1, .36, 1), border-color .4s, background .5s;
}

.card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 15% 15%, rgba(var(--color-accent-rgb), .35), transparent 70%);
    opacity: 0;
    transition: opacity .6s;
    pointer-events: none;
}

.card:hover {
    transform: translateY(-6px);
    border-color: rgba(var(--color-accent-rgb), .55);
}

.card:hover::before {
    opacity: 1;
}

.card h3 {
    margin: 0;
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: .5px;
}

.card p {
    margin: 0;
    font-size: .9rem;
    line-height: 1.5;
    color: var(--color-text-dim);
}

.timeline {
    position: relative;
    margin: 0;
    padding: .5rem 0 0 0;
    display: flex;
    flex-direction: column;
    gap: 2.1rem;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(var(--color-border), rgba(var(--color-accent-rgb), .5), var(--color-border));
}

.timeline-item {
    display: flex;
    gap: 1.4rem;
    position: relative;
    padding-left: 1.6rem;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: 2px;
    top: 6px;
    width: 16px;
    height: 16px;
    background: var(--gradient);
    border-radius: 50%;
    box-shadow: 0 0 0 4px var(--color-bg);
}

.time {
    font-size: .7rem;
    font-weight: 600;
    letter-spacing: .5px;
    text-transform: uppercase;
    color: var(--color-text-dim);
    margin-top: .2rem;
    min-width: 120px;
}

.timeline-item .content h3 {
    margin: 0 0 .3rem;
    font-size: 1.05rem;
}

.timeline-item .content p {
    margin: 0;
    font-size: .9rem;
    color: var(--color-text-dim);
    line-height: 1.55;
}

.skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 1.8rem;
}

.skill-group {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    padding: 1.2rem 1rem 1.2rem;
    border-radius: var(--radius-md);
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: border-color .4s, transform .5s;
}

.skill-group::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(140deg, rgba(var(--color-accent-rgb), .4), transparent 60%);
    opacity: 0;
    transition: opacity .6s;
}

.skill-group:hover {
    transform: translateY(-5px);
    border-color: rgba(var(--color-accent-rgb), .45);
}

.skill-group:hover::before {
    opacity: .75;
}

.skill-group h3 {
    margin: 0 0 .7rem;
    font-size: .95rem;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-weight: 600;
    color: var(--color-text);
}

.skill-group ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: .45rem;
}

.skill-group li {
    font-size: .85rem;
    color: var(--color-text-dim);
    position: relative;
    padding-left: 1rem;
}

.skill-group li::before {
    /* Dùng mã Unicode thay vì ký tự trực tiếp để tránh lỗi hiển thị kiểu â–¹ khi sai encoding */
    content: "\25B9";
    /* ký tự tam giác nhỏ: ▹ */
    position: absolute;
    left: 0;
    color: var(--color-accent);
    font-size: .75rem;
    top: 1px;
}

/* ---------------- Quote Card ---------------- */
.quote-card {
    background: linear-gradient(145deg, rgba(var(--color-accent-rgb), .10), transparent 65%), var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: 2.2rem 2rem 2rem 2.4rem;
    margin: 0;
    position: relative;
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.quote-card::before {
    content: '“';
    position: absolute;
    top: -18px;
    left: 16px;
    font-size: 6.5rem;
    line-height: 1;
    font-family: Georgia, 'Times New Roman', serif;
    font-weight: 700;
    background: var(--gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    opacity: .18;
    pointer-events: none;
}

.quote-card blockquote {
    margin: 0 0 .95rem;
    position: relative;
    font-style: italic;
}

.quote-card blockquote p {
    margin: 0;
    font-size: clamp(1.15rem, 2.2vw, 1.55rem);
    line-height: 1.45;
    font-weight: 500;
    color: var(--color-text);
    text-wrap: balance;
    font-family: var(--font-heading);
}

.quote-card figcaption {
    font-size: .75rem;
    letter-spacing: .8px;
    text-transform: uppercase;
    font-weight: 600;
    color: var(--color-text-dim);
    margin: 0 0 1rem;
}

.quote-card .quote-author {
    background: var(--gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.quote-note {
    margin: 0;
    font-size: .9rem;
    line-height: 1.55;
    color: var(--color-text-dim);
}

/* Bố cục mới khi đưa quote lên trên */
.quote-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2.2rem;
    align-items: start;
}

.quote-image {
    margin: 0;
    border-radius: var(--radius-lg);
    overflow: hidden;
    position: relative;
    border: 1px solid var(--color-border);
    background: var(--color-surface);
    box-shadow: var(--shadow-sm);
    /* Thu nhỏ ảnh: width co giãn theo viewport nhưng không quá lớn */
    width: clamp(200px, 28vw, 300px);
    justify-self: center;
}

.quote-image img {
    width: 100%;
    display: block;
    object-fit: cover;
    aspect-ratio: 3/4.3;
    filter: saturate(1.02) contrast(1.02);
    transition: transform .8s cubic-bezier(.22, 1, .36, 1), filter .6s;
}

.quote-image::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(140deg, rgba(var(--color-accent-rgb), .35), transparent 60%);
    mix-blend-mode: overlay;
    opacity: .55;
    pointer-events: none;
    transition: opacity .6s;
}

.quote-image:hover img {
    transform: scale(1.04);
    filter: saturate(1.08) contrast(1.05);
}

.quote-image:hover::after {
    opacity: .75;
}

@media (max-width:700px) {
    .quote-card {
        padding: 1.8rem 1.4rem 1.6rem 1.8rem;
    }
}

[data-theme='light'] .quote-card {
    background: linear-gradient(145deg, rgba(var(--color-accent-rgb), .08), transparent 70%), var(--color-surface);
}

[data-theme='light'] .quote-card::before {
    opacity: .14;
}

.contact p {
    max-width: 560px;
}

.muted {
    color: var(--color-text-dim);
    font-size: .85rem;
}

.footer {
    text-align: center;
    padding: 2rem 1rem 3rem;
    font-size: .75rem;
    color: var(--color-text-dim);
}

.footer a {
    color: var(--color-accent);
    text-decoration: none;
}

.back-top {
    position: fixed;
    right: 1.2rem;
    bottom: 1.2rem;
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text);
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    text-decoration: none;
    font-size: 1.2rem;
    box-shadow: var(--shadow-sm);
    transition: background .35s, transform .35s;
}

.back-top:hover {
    transform: translateY(-4px);
}

[data-animate] {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity .9s ease, transform 1s cubic-bezier(.22, 1, .36, 1);
}

[data-animate].in-view {
    opacity: 1;
    transform: translateY(0);
}

@media (max-width:880px) {
    .nav-links {
        position: absolute;
        top: 100%;
        right: 0;
        background: var(--color-surface);
        flex-direction: column;
        align-items: flex-start;
        padding: .8rem 1rem;
        border: 1px solid var(--color-border);
        border-radius: var(--radius-sm);
        display: none;
        box-shadow: var(--shadow-md);
    }

    .nav-links.show {
        display: flex;
    }

    .nav-toggle {
        display: flex;
    }

    .hero {
        padding-top: 4.5rem;
    }
}

@media (max-width:560px) {
    .hero {
        grid-template-columns: 1fr;
    }

    .avatar-placeholder {
        width: 210px;
        height: 210px;
    }

    .skill-group,
    .card {
        padding: 1rem 1rem 1.1rem;
    }
}

[data-theme='light'] .card::before {
    background: radial-gradient(circle at 15% 15%, rgba(var(--color-accent-rgb), .18), transparent 70%);
}

[data-theme='light'] .avatar-placeholder {
    background: linear-gradient(160deg, rgba(var(--color-accent-rgb), .25), rgba(var(--color-accent-rgb), .1));
}

[data-theme='light'] .skill-group::before {
    background: linear-gradient(140deg, rgba(var(--color-accent-rgb), .3), transparent 60%);
}

:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: var(--color-bg);
}

::-webkit-scrollbar-thumb {
    background: rgba(var(--color-accent-rgb), .4);
    border-radius: 6px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(var(--color-accent-rgb), .6);
}

/* ================= Curtain Reveal Effect ================= */
.curtain {
    position: fixed;
    inset: 0;
    z-index: 1200;
    display: flex;
    pointer-events: auto;
    font-family: var(--font-sans);
    isolation: isolate;
    cursor: pointer;
}

.curtain.ready:focus-visible {
    box-shadow: 0 0 0 4px rgba(var(--color-accent-rgb), .55);
    outline: none;
}

.curtain.ready {
    user-select: none;
}

.curtain-panel {
    flex: 1;
    position: relative;
    background: linear-gradient(145deg, rgba(var(--color-accent-rgb), .55), rgba(var(--color-accent-rgb), .35) 45%, rgba(var(--color-accent-rgb), .15));
    backdrop-filter: blur(4px) saturate(160%);
    -webkit-backdrop-filter: blur(4px) saturate(160%);
    transform: translateX(0);
}

.curtain-center {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.curtain-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .9rem;
}

.curtain-logo {
    font-size: clamp(1.8rem, 4vw, 3rem);
    font-weight: 600;
    background: var(--gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    letter-spacing: 1px;
    opacity: 1;
    transform: translateY(0);
    transition: transform .6s cubic-bezier(.22, 1, .36, 1), filter .6s;
}

.curtain.ready .curtain-logo {
    animation: pulseLogo 2.2s ease-in-out infinite;
}

.curtain-hint {
    font-size: .85rem;
    letter-spacing: .5px;
    color: var(--color-text-dim);
    opacity: .85;
    animation: hintFade 1.8s ease-in-out infinite;
}

.curtain.play .curtain-hint {
    display: none;
}

@keyframes pulseLogo {

    0%,
    100% {
        filter: brightness(1);
        transform: translateY(0);
    }

    50% {
        filter: brightness(1.25);
        transform: translateY(-4px);
    }
}

@keyframes hintFade {

    0%,
    100% {
        opacity: .35;
    }

    50% {
        opacity: .85;
    }
}

.curtain.play {
    cursor: default;
}

.curtain.play .curtain-panel.left {
    animation: curtainLeft 1.2s cubic-bezier(.8, .02, .15, .99) .05s forwards;
}

.curtain.play .curtain-panel.right {
    animation: curtainRight 1.2s cubic-bezier(.8, .02, .15, .99) .05s forwards;
}

.curtain.done {
    opacity: 0;
    transition: opacity .6s ease;
    pointer-events: none;
}

@keyframes curtainLeft {
    60% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(-100%);
    }
}

@keyframes curtainRight {
    60% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(100%);
    }
}

/* bỏ keyframes logo cũ (in/out) vì nay controlled bằng click */

@media (prefers-reduced-motion: reduce) {
    .curtain {
        display: none;
    }

    .curtain-panel,
    .curtain-logo {
        animation: none !important;
    }
}

[data-theme='dark'] .curtain-panel {
    background: linear-gradient(160deg, rgba(var(--color-accent-rgb), .42), rgba(var(--color-accent-rgb), .25) 50%, rgba(var(--color-accent-rgb), .12));
}

/* ArtTech story custom styles (complements Tailwind utilities) */
#arttech-story img#arttech-img {
    transition: opacity .45s ease-in-out, transform .45s ease-in-out;
}

@media (max-width: 768px) {

    /* mobile: stack text above image with padding adjustments */
    #arttech-story .md\:w-1\/2 {
        width: 100%;
    }
}

/* ArtTech card styles to ensure text clarity and proper contrast */
.text-card {
    background: rgba(255, 255, 255, 0.8);
    /* bg-white/80 to keep text crisp on patterned bg */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 1rem;
    /* rounded-2xl approx */
    box-shadow: 0 8px 30px rgba(8, 10, 20, 0.12);
    padding: 0.75rem;
    /* slightly reduced padding */
    overflow: visible;
    /* allow arrows to appear outside the card */
    /* Layout: fixed-size image column with text filling remaining space */
    --arttech-image-size: 320px;
    /* base size (phase 4 size) */
    display: grid;
    grid-template-columns: 1fr var(--arttech-image-size);
    gap: 1rem;
    align-items: center;
    min-height: var(--arttech-image-size);
    position: relative;
}

/* Subtle pink border and soft pink glow to make the card feel premium */
.text-card {
    border: 1px solid rgba(255, 182, 193, 0.28);
    /* pink-200/50-ish */
    box-shadow: 0 10px 30px rgba(255, 182, 193, 0.06), 0 6px 18px rgba(8, 10, 20, 0.08);
    border: 1px solid var(--color-border);
    /* add border like other cards */
}

.text-card h2,
.text-card h3,
.text-card h4,
.text-card p {
    font-family: var(--font-sans);
}

.text-card h2 {
    margin: 0 0 .5rem 0;
}

.text-card p {
    line-height: 1.6;
    /* leading-relaxed */
    color: #1f2937;
    /* text-gray-800 for light */
}

@media (prefers-color-scheme: dark) {
    .text-card {
        background: rgba(17, 18, 20, 0.6);
        /* slightly transparent dark card in dark mode */
    }

    .text-card p {
        color: #e5e7eb;
        /* text-gray-200 */
    }
}

[data-theme='dark'] .text-card {
    background: rgba(17, 18, 20, 0.6);
}

[data-theme='dark'] .text-card p {
    color: #e5e7eb;
}

/* ArtTech heading uses the site's heading font (Pacifico) */
.arttech-heading {
    font-family: var(--font-heading);
    line-height: var(--heading-line-height);
    font-weight: 600;
    margin: 0 0 1.9rem 0;
    display: block;
    letter-spacing: .4px;
    font-size: clamp(1.7rem, 2.9vw, 2.15rem);
    background: linear-gradient(90deg, var(--color-text) 0%, var(--color-text-dim) 70%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    padding-top: .25rem;
}

/* More specific rule so Pacifico applies even if other h2 rules exist */
.text-card .arttech-heading {
    font-family: var(--font-heading) !important;
}

/* Chapter heading inside the ArtTech text: larger and stronger emphasis */
#arttech-text h3 {
    margin: 0 0 0.6rem 0;
    font-size: clamp(1.05rem, 1.6vw, 1.3rem);
    font-weight: 800;
    /* strong */
    color: var(--color-text);
    letter-spacing: 0.2px;
}

/* Image styling */
#arttech-img {
    /* image will be clipped by .text-card so no extra radius required */
    object-fit: cover;
    max-height: 420px;
    /* reduced image height */
    width: 100%;
}

/* Ensure the rounded image and hover zoom look smooth */
#arttech-img {
    border-radius: 1rem;
    /* rounded-2xl approx */
    transition: transform .45s cubic-bezier(.22, 1, .36, 1), box-shadow .3s;
}

/* Image fills the fixed image column and preserves aspect ratio */
#arttech-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
}

@media (max-width: 768px) {

    /* Stack columns on small screens */
    .text-card {
        grid-template-columns: 1fr;
        min-height: auto;
    }

    .img-clipper {
        width: 100%;
        height: auto;
    }

    #arttech-img {
        width: 100%;
        height: auto;
    }
}

/* Make .text-card behave like .card on hover (soft lift) */
.text-card:hover {
    transform: translateY(-6px);
    transition: transform .45s cubic-bezier(.22, 1, .36, 1), box-shadow .4s;
    box-shadow: 0 14px 40px rgba(255, 182, 193, 0.08), 0 8px 26px rgba(8, 10, 20, 0.10);
}

.text-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 15% 15%, rgba(var(--color-accent-rgb), .35), transparent 70%);
    opacity: 0;
    transition: opacity .6s;
    pointer-events: none;
}

.text-card:hover {
    border-color: rgba(var(--color-accent-rgb), .55);
}

/* Inner clipping container so the image keeps rounded corners while allowing arrows outside */
.img-clipper {
    border-radius: 1rem;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
}

/* Arrow buttons for ArtTech navigation: subtle background and border like other cards */
#art-prev,
#art-next {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: inherit;
    box-shadow: var(--shadow-sm);
}

/* ================= ArtTech Enhancements (Progress, Dots, Counter) ================= */
.arttech-meta .phase-counter {
    font-family: var(--font-sans);
    letter-spacing: 1px;
    background: linear-gradient(90deg, var(--color-text) 0%, var(--color-text-dim) 80%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    position: relative;
}

.arttech-dots {
    user-select: none;
}

.arttech-dots button {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 1px solid var(--color-border);
    background: linear-gradient(145deg, var(--color-surface), var(--color-bg-alt));
    position: relative;
    padding: 0;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: border-color .4s, transform .45s, background .5s;
}

.arttech-dots button::after {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(var(--color-accent-rgb), .95), rgba(var(--color-accent-rgb), .5));
    opacity: 0;
    transform: scale(.4);
    transition: opacity .45s, transform .45s;
}

.arttech-dots button[aria-selected='true'] {
    border-color: rgba(var(--color-accent-rgb), .7);
    background: linear-gradient(140deg, rgba(var(--color-accent-rgb), .25), transparent 70%);
    box-shadow: 0 0 0 3px rgba(var(--color-accent-rgb), .25);
}

.arttech-dots button[aria-selected='true']::after {
    opacity: 1;
    transform: scale(1);
}

.arttech-dots button:hover:not([aria-selected='true']),
.arttech-dots button:focus-visible:not([aria-selected='true']) {
    border-color: rgba(var(--color-accent-rgb), .55);
    transform: translateY(-3px);
}

.arttech-dots button:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--color-accent-rgb), .45);
}

.arttech-progress {
    --h: 6px;
    position: relative;
}

.arttech-progress-track {
    height: var(--h);
    background: linear-gradient(90deg, var(--color-border), rgba(var(--color-accent-rgb), .25));
    border-radius: 999px;
    overflow: hidden;
    position: relative;
}

.arttech-progress-fill {
    position: absolute;
    inset: 0 auto 0 0;
    width: 0%;
    background: linear-gradient(100deg, #ff9cc9, #c08bff 45%, #8a4bff);
    background-size: 200% 100%;
    animation: progressSheen 7s linear infinite;
    border-radius: inherit;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, .08), 0 4px 10px -2px rgba(0, 0, 0, .25);
    transition: width .65s cubic-bezier(.22, 1, .36, 1);
}

@keyframes progressSheen {
    0% {
        background-position: 0 0;
    }

    100% {
        background-position: -200% 0;
    }
}

/* Dark mode subtle adjustments */
[data-theme='dark'] .arttech-dots button {
    background: linear-gradient(145deg, var(--color-bg-alt), var(--color-surface));
}

[data-theme='light'] .arttech-dots button[aria-selected='true'] {
    background: linear-gradient(140deg, rgba(var(--color-accent-rgb), .18), transparent 70%);
}

@media (max-width: 880px) {
    .arttech-meta .phase-counter {
        font-size: .6rem;
    }

    .arttech-dots button {
        width: 12px;
        height: 12px;
    }
}

@media (max-width:600px) {
    .arttech-progress {
        --h: 5px;
    }
}

/* Make the SVG strokes slightly translucent so they feel light */
#art-prev svg path,
#art-next svg path {
    opacity: 0.95;
}

/* ensure arrows float above the card/content */
#art-prev,
#art-next {
    z-index: 50;
}

/* Slightly larger touch target when on small screens */
@media (max-width: 600px) {

    #art-prev,
    #art-next {
        transform: translateY(-50%);
        left: 8px;
        right: 8px;
    }
}